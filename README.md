# å›¾ä¹¦é¦†åº§ä½é¢„çº¦ä¿¡æ¯ç®¡ç†ç³»ç»Ÿ

## é¡¹ç›®ç®€ä»‹

è¿™æ˜¯ä¸€ä¸ªåŸºäºSpring Boot + Vueçš„å›¾ä¹¦é¦†åº§ä½é¢„çº¦ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒå­¦ç”Ÿé¢„çº¦åº§ä½å’Œç®¡ç†å‘˜ç®¡ç†åŠŸèƒ½ã€‚

## æŠ€æœ¯æ ˆ

### åç«¯
- Spring Boot 2.7.18
- MySQL 5.7
- MyBatis Plus 3.5.3.1
- JDK 8
- Hutoolå·¥å…·åº“

### å‰ç«¯
- Vue 2.6.14
- Element UI (PCç«¯)
- Vant (ç§»åŠ¨ç«¯)
- Axios
- Vuex
- Vue Router

## åŠŸèƒ½ç‰¹æ€§

### å­¦ç”Ÿç«¯ï¼ˆç§»åŠ¨ç«¯ï¼‰
- ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- é€‰æ‹©æ—¶é—´ã€å›¾ä¹¦é¦†ã€åº§ä½è¿›è¡Œé¢„çº¦
- æŸ¥çœ‹é¢„çº¦è®°å½•
- ç”Ÿæˆé¢„çº¦äºŒç»´ç 
- å–æ¶ˆé¢„çº¦

### ç®¡ç†å‘˜ç«¯ï¼ˆPCç«¯ï¼‰
- ç®¡ç†å‘˜ç™»å½•
- å›¾ä¹¦é¦†ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- åº§ä½ç®¡ç†ï¼ˆå¢åˆ æ”¹æŸ¥ï¼‰
- é¢„çº¦è®°å½•ç®¡ç†
- æ‰«ç éªŒè¯é¢„çº¦

### ç³»ç»Ÿç‰¹æ€§
- é¢„çº¦å†²çªæ£€æµ‹
- è‡ªåŠ¨å¤„ç†è¿‡æœŸé¢„çº¦
- æµæ°´å·è‡ªåŠ¨ç”Ÿæˆ
- å®šæ—¶ä»»åŠ¡å¤„ç†

## é¡¹ç›®ç»“æ„

```
library-reservation-system/
â”œâ”€â”€ backend/                    # Spring Bootåç«¯
â”‚   â”œâ”€â”€ src/main/java/com/library/
â”‚   â”‚   â”œâ”€â”€ controller/         # æ§åˆ¶å™¨
â”‚   â”‚   â”œâ”€â”€ service/           # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ mapper/            # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ entity/            # å®ä½“ç±»
â”‚   â”‚   â”œâ”€â”€ dto/               # æ•°æ®ä¼ è¾“å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ vo/                # è§†å›¾å¯¹è±¡
â”‚   â”‚   â”œâ”€â”€ utils/             # å·¥å…·ç±»
â”‚   â”‚   â””â”€â”€ config/            # é…ç½®ç±»
â”‚   â””â”€â”€ src/main/resources/
â”‚       â”œâ”€â”€ application.yml    # é…ç½®æ–‡ä»¶
â”‚       â””â”€â”€ mapper/            # MyBatis XML
â”œâ”€â”€ frontend/                   # Vueå‰ç«¯
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ views/            # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ mobile/       # ç§»åŠ¨ç«¯é¡µé¢
â”‚   â”‚   â”‚   â””â”€â”€ admin/        # ç®¡ç†ç«¯é¡µé¢
â”‚   â”‚   â”œâ”€â”€ api/              # APIæ¥å£
â”‚   â”‚   â”œâ”€â”€ utils/            # å·¥å…·å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ router/           # è·¯ç”±é…ç½®
â”‚   â”‚   â””â”€â”€ store/            # çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ package.json
â””â”€â”€ database_design.sql        # æ•°æ®åº“è®¾è®¡
```

## å®‰è£…éƒ¨ç½²

### 1. ç¯å¢ƒè¦æ±‚

- JDK 8+
- MySQL 5.7+
- Node.js 14+
- Maven 3.6+

### 2. æ•°æ®åº“é…ç½®

1. åˆ›å»ºæ•°æ®åº“ï¼š
```sql
CREATE DATABASE library_reservation DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

2. æ‰§è¡Œæ•°æ®åº“è„šæœ¬ï¼š
```bash
mysql -u root -p library_reservation < database_design.sql
```

3. ä¿®æ”¹æ•°æ®åº“è¿æ¥é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š
ç¼–è¾‘ `backend/src/main/resources/application.yml`

### 3. åç«¯å¯åŠ¨

1. è¿›å…¥åç«¯ç›®å½•ï¼š
```bash
cd backend
```

2. ä½¿ç”¨Mavenå¯åŠ¨ï¼š
```bash
# æ¸…ç†å¹¶ç¼–è¯‘
mvn clean compile

# å¯åŠ¨åº”ç”¨
mvn spring-boot:run
```

æˆ–è€…ä½¿ç”¨IDEï¼š
- å¯¼å…¥Mavené¡¹ç›®
- ç›´æ¥è¿è¡Œ `com.library.LibraryApplication` ä¸»ç±»

åç«¯æœåŠ¡å°†åœ¨ `http://localhost:8080/api` å¯åŠ¨

### 4. å‰ç«¯å¯åŠ¨

1. è¿›å…¥å‰ç«¯ç›®å½•ï¼š
```bash
cd frontend
```

2. å®‰è£…ä¾èµ–ï¼š
```bash
# ä½¿ç”¨npm
npm install

# æˆ–ä½¿ç”¨yarn
yarn install
```

3. å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼š
```bash
# ä½¿ç”¨npm
npm run serve

# æˆ–ä½¿ç”¨yarn
yarn serve
```

å‰ç«¯æœåŠ¡å°†åœ¨ `http://localhost:3000` å¯åŠ¨

### 5. éªŒè¯å®‰è£…

1. è®¿é—®åç«¯APIï¼šhttp://localhost:8080/api/auth/current
2. è®¿é—®å‰ç«¯é¡µé¢ï¼šhttp://localhost:3000
3. æ£€æŸ¥æ•°æ®åº“è¿æ¥æ˜¯å¦æ­£å¸¸

## ä½¿ç”¨è¯´æ˜

### é»˜è®¤è´¦å·

ç³»ç»Ÿåˆå§‹åŒ–æ—¶ä¼šåˆ›å»ºä»¥ä¸‹æµ‹è¯•è´¦å·ï¼š

**ç®¡ç†å‘˜è´¦å·ï¼š**
- ç”¨æˆ·åï¼šadmin
- å¯†ç ï¼š123456

**å­¦ç”Ÿè´¦å·ï¼š**
- ç”¨æˆ·åï¼šstudent001
- å¯†ç ï¼š123456

### è®¿é—®åœ°å€

- **ç§»åŠ¨ç«¯ï¼ˆå­¦ç”Ÿï¼‰ï¼š** http://localhost:3000/#/mobile
- **PCç«¯ï¼ˆç®¡ç†å‘˜ï¼‰ï¼š** http://localhost:3000/#/admin
- **é¦–é¡µï¼ˆè‡ªåŠ¨è·³è½¬ï¼‰ï¼š** http://localhost:3000

### é¢„çº¦æµç¨‹

1. **å­¦ç”Ÿé¢„çº¦ï¼š**
   - ç™»å½•ç§»åŠ¨ç«¯
   - é€‰æ‹©é¢„çº¦æ—¶é—´
   - é€‰æ‹©å›¾ä¹¦é¦†
   - é€‰æ‹©å¯ç”¨åº§ä½
   - ç¡®è®¤é¢„çº¦
   - è·å–é¢„çº¦äºŒç»´ç 

2. **ç®¡ç†å‘˜éªŒè¯ï¼š**
   - ç™»å½•ç®¡ç†ç«¯
   - ä½¿ç”¨æ‰«ç åŠŸèƒ½
   - æ‰«æå­¦ç”ŸäºŒç»´ç 
   - ç¡®è®¤ç­¾åˆ°

### é¢„çº¦è§„åˆ™

1. åŒä¸€ç”¨æˆ·åŒä¸€æ—¶é—´æ®µåªèƒ½é¢„çº¦ä¸€ä¸ªåº§ä½
2. åŒä¸€åº§ä½åŒä¸€æ—¶é—´æ®µåªèƒ½è¢«ä¸€ä¸ªç”¨æˆ·é¢„çº¦
3. é¢„çº¦æ—¶é—´ä¸èƒ½æ˜¯è¿‡å»æ—¶é—´
4. å…è®¸è¿Ÿåˆ°ç­¾åˆ°ï¼Œä½†ä¸èƒ½è¶…è¿‡é¢„çº¦ç»“æŸæ—¶é—´
5. è¶…è¿‡é¢„çº¦ç»“æŸæ—¶é—´æœªç­¾åˆ°å°†è‡ªåŠ¨æ ‡è®°ä¸º"çˆ½çº¦"

## APIæ¥å£

### è®¤è¯æ¥å£
- POST `/api/auth/login` - ç”¨æˆ·ç™»å½•
- POST `/api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- POST `/api/auth/logout` - ç”¨æˆ·ç™»å‡º
- GET `/api/auth/current` - è·å–å½“å‰ç”¨æˆ·

### å›¾ä¹¦é¦†æ¥å£
- GET `/api/library/list` - è·å–å›¾ä¹¦é¦†åˆ—è¡¨
- GET `/api/library/page` - åˆ†é¡µæŸ¥è¯¢å›¾ä¹¦é¦†
- POST `/api/library` - æ–°å¢å›¾ä¹¦é¦†
- PUT `/api/library/{id}` - æ›´æ–°å›¾ä¹¦é¦†
- DELETE `/api/library/{id}` - åˆ é™¤å›¾ä¹¦é¦†

### åº§ä½æ¥å£
- GET `/api/seat/library/{libraryId}` - è·å–å›¾ä¹¦é¦†åº§ä½
- GET `/api/seat/available` - è·å–å¯ç”¨åº§ä½
- POST `/api/seat` - æ–°å¢åº§ä½
- PUT `/api/seat/{id}` - æ›´æ–°åº§ä½
- DELETE `/api/seat/{id}` - åˆ é™¤åº§ä½

### é¢„çº¦æ¥å£
- POST `/api/reservation` - åˆ›å»ºé¢„çº¦
- PUT `/api/reservation/{id}/cancel` - å–æ¶ˆé¢„çº¦
- POST `/api/reservation/checkin` - æ‰«ç ç­¾åˆ°
- GET `/api/reservation/page` - åˆ†é¡µæŸ¥è¯¢é¢„çº¦è®°å½•

## æ³¨æ„äº‹é¡¹

1. ç¡®ä¿MySQLæœåŠ¡æ­£åœ¨è¿è¡Œï¼Œç«¯å£ä¸º33006
2. ç¡®ä¿æ•°æ®åº“è¿æ¥ä¿¡æ¯æ­£ç¡®
3. å‰ç«¯ä»£ç†é…ç½®æŒ‡å‘åç«¯æœåŠ¡åœ°å€
4. ç§»åŠ¨ç«¯å’ŒPCç«¯ä½¿ç”¨ä¸åŒçš„UIç»„ä»¶åº“ï¼Œä¼šæ ¹æ®è®¾å¤‡è‡ªåŠ¨åˆ‡æ¢
5. å®šæ—¶ä»»åŠ¡æ¯5åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡è¿‡æœŸé¢„çº¦ï¼Œæ¯å¤©å‡Œæ™¨é‡ç½®æµæ°´å·

## å¼€å‘è¯´æ˜

- åç«¯ä½¿ç”¨MyBatis Plusç®€åŒ–æ•°æ®åº“æ“ä½œ
- å‰ç«¯ä½¿ç”¨Vuexè¿›è¡ŒçŠ¶æ€ç®¡ç†
- æ”¯æŒè·¨åŸŸè¯·æ±‚å’ŒSessionç®¡ç†
- äºŒç»´ç ä½¿ç”¨QRCode.jsç”Ÿæˆ
- æ—¶é—´æ ¼å¼ç»Ÿä¸€ä½¿ç”¨ `yyyy-MM-dd HH:mm:ss`

## æ•…éšœæ’é™¤

1. **æ•°æ®åº“è¿æ¥å¤±è´¥ï¼š** æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€å’Œè¿æ¥é…ç½®
2. **å‰ç«¯æ— æ³•è®¿é—®åç«¯ï¼š** æ£€æŸ¥ä»£ç†é…ç½®å’Œåç«¯æœåŠ¡çŠ¶æ€
3. **ç™»å½•å¤±è´¥ï¼š** æ£€æŸ¥ç”¨æˆ·ç±»å‹å’Œæƒé™é…ç½®
4. **é¢„çº¦å†²çªï¼š** æ£€æŸ¥æ—¶é—´æ ¼å¼å’Œå†²çªæ£€æµ‹é€»è¾‘

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜ï¼Œè¯·è”ç³»å¼€å‘å›¢é˜Ÿã€‚

## ğŸ”§ æ•…éšœæ’é™¤

### å‰ç«¯ç¼–è¯‘é”™è¯¯ä¿®å¤

å¦‚æœé‡åˆ°å‰ç«¯ç¼–è¯‘é”™è¯¯ï¼Œè¯·æŒ‰ä»¥ä¸‹æ­¥éª¤æ“ä½œï¼š

#### æ–¹æ³•1ï¼šä½¿ç”¨ä¿®å¤è„šæœ¬ï¼ˆæ¨èï¼‰
```bash
åŒå‡» fix-frontend.bat
```

#### æ–¹æ³•2ï¼šæ‰‹åŠ¨ä¿®å¤
```bash
cd frontend
# åˆ é™¤ä¾èµ–ç›®å½•
rm -rf node_modules
# åˆ é™¤é”å®šæ–‡ä»¶
rm package-lock.json
# æ¸…ç†ç¼“å­˜
npm cache clean --force
# é‡æ–°å®‰è£…
npm install
```

#### æ–¹æ³•3ï¼šä½¿ç”¨å›½å†…é•œåƒ
```bash
npm install --registry=https://registry.npm.taobao.org
```

### åç«¯ç¼–è¯‘é”™è¯¯ä¿®å¤

```bash
cd backend
mvn clean compile
# å¦‚æœè¿˜æœ‰é—®é¢˜ï¼ŒæŸ¥çœ‹è¯¦ç»†é”™è¯¯
mvn clean compile -X
```

### å¸¸è§é—®é¢˜

1. **è·¯ç”±æ–‡ä»¶æ‰¾ä¸åˆ°**ï¼šå·²ä¿®å¤ï¼Œç§»é™¤äº†ä¸å­˜åœ¨çš„ Reservation.vue å¼•ç”¨
2. **ä¾èµ–å®‰è£…å¤±è´¥**ï¼šä½¿ç”¨ fix-frontend.bat è„šæœ¬è‡ªåŠ¨ä¿®å¤
3. **ç«¯å£è¢«å ç”¨**ï¼šä¿®æ”¹ vue.config.js ä¸­çš„ç«¯å£é…ç½®
4. **æ•°æ®åº“è¿æ¥å¤±è´¥**ï¼šæ£€æŸ¥ MySQL æœåŠ¡å’Œç«¯å£é…ç½®

æ›´å¤šè¯¦ç»†çš„æ•…éšœæ’é™¤ä¿¡æ¯è¯·å‚è€ƒï¼š`TROUBLESHOOTING.md`